<div>
  <h3>filters</h3>
  <%= form_tag "/listings", method: "get" do %>
    <%= label_tag :min_bed_count  %>
    <%= number_field_tag :min_bed_count %>
    <br />
    <% Listing.room_types.each do |x| %>
      <%= check_box_tag("room_types[#{x[1]}]") %>
      <%= label_tag("room_types[#{x[1]}]", x[0].humanize) %>
    <% end %>
    <br />
    <% amenities_array.each do |x| %>
      <%= check_box_tag("amenities[#{x}]") %>
      <%= label_tag("amenities[#{x}]", x.to_s.humanize) %>
    <% end %>
    <br />
    <%= text_field_tag :tags %>
    <%= submit_tag "filter!"  %>
  <% end %>
</div>
<% @listings.page(@query_params[:page]).each do |x| %>
  <div class="listing col-sm-6 col-lg-4">
    <%= render partial: "/listings/carousel", locals: { carousel_id: "listing-carousel-#{x.id}", listing: x } %>
    <h4 style="
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    "><%= link_to "$#{x.price} #{x.name}", controller: "listings", action: "show", id: x.id %></h4>
    <div><%= "#{x.room_type.humanize} | #{x.bed_count} beds" %></div>
  </div>
<% end %>
<div class="col-xs-12">
  <%= link_to "Previous", controller: "listings", action: "index", page: @query_params[:page].to_i - 1 unless @listings.page(@query_params[:page]).first_page? %>
  <%= link_to "Next", controller: "listings", action: "index", page: @query_params[:page].to_i + 1 unless @listings.page(@query_params[:page]).last_page? %>
</div>
